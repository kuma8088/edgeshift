# 基本ルール（常時適用）

> pathsを指定しないため、すべての操作で読み込まれます

---

## 計画優先の原則

```
- 実装前に必ず計画を説明し、承認を求める
- 複雑なタスクは Plan Mode を使用する
- 不明点は仮定せず、質問する
```

## 変更の原則

```
- 既存の機能を削除しない
- ファイル全体を書き換えない（必要な箇所のみ変更）
- 変更前後でテストが通ることを確認
```

## シンプルさの原則

```
- 最もシンプルな解決策を探す
- 過剰なコードを書かない
- 複雑さより明確さを優先
```

## Evidence-Based の原則

```
- 提案する前に公式ドキュメントを参照する
- 推測ではなく、根拠に基づいて提案する
- 最新のベストプラクティスを確認する
```

---

## リサーチルール

### 実装前にリサーチすべきケース

```
- 新しいライブラリ・フレームワークの使用
- セキュリティが重要な機能（認証、決済、暗号化）
- パフォーマンスクリティカルな処理
- 外部 API との連携
- 本番環境特有の設定（AWS, Terraform 等）
```

### リサーチ結果の活用

```
1. 結果を PRD または該当タスクファイルに記録
2. 採用した理由と却下した代替案を明記
3. 参照したドキュメントの URL を保存
```

---

## 出力フォーマット

### コード変更時

```
1. 変更の目的を簡潔に説明
2. 変更するファイルをリスト
3. 変更内容（差分）を表示
4. 確認を求める
```

### エラー解決時

```
1. エラーの根本原因を特定
2. 解決策を説明
3. 同様のエラーを防ぐ方法を提案
```

### 設計・計画時

```
1. 要件の確認
2. 複数のアプローチを提示（トレードオフ付き）
3. 推奨案とその理由
4. 実装ステップ
```

---

## コンテキスト効率化

### 長い会話での対応

```
- 会話が長くなったら /compact を提案
- 重要な情報は明示的に引き継ぎ
- 不要な探索結果は要約して報告
```

### 探索・計画の分離

```
- 大規模な探索は Explore Agent を活用
- 複雑な計画は Plan Agent を活用
- メインコンテキストをクリーンに保つ
```

---

## 作業完了チェックリスト

### コード変更後

```
[ ] TypeScript / Lint エラーがないか
[ ] テストが通るか
[ ] セキュリティ上の問題がないか
[ ] パフォーマンスへの影響を考慮したか
[ ] 既存機能を壊していないか
```

### PR / コミット前

```
[ ] 変更内容が明確か
[ ] 不要なファイルが含まれていないか
[ ] 機密情報が含まれていないか
[ ] コミットメッセージが適切か
```
