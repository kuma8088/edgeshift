• Findings

- High: step1TimingMode treats delay_minutes: null as “minutes” because it only checks !== undefined. When editing an existing sequence where
  delay_minutes is null (days mode), the form flips to minutes mode and will submit delay_minutes: 0, effectively turning step 1 into immediate send.
  src/components/admin/SequenceForm.tsx:40, src/components/admin/SequenceForm.tsx:52, src/components/admin/SequenceForm.tsx:93
- Medium: The timeline preview ignores delay_minutes and still labels delay_days=0 as “即時”, so minute-based schedules and default-send-time semantics
  are misrepresented in the preview. src/components/admin/SequenceTimelinePreview.tsx:33

Open questions / assumptions

- Should delay_minutes: null be treated as “days mode,” not “minutes mode,” across all edit forms?
- Do you want the timeline preview to show minute-based timings (e.g., 即時送信 / +Xm) and “当日 HH:MM” for day-based step 1?

› このレビュー指摘について確認して:

- 何を言っている？
- この問題は実際に起こる？
- 起こった場合の影響は？
- 現状のコードで本当に問題？
- 修正する場合の工数は？

• 以下、直前のレビュー指摘（2点）について回答します。コードはコミット差分ベースの確認です。

1. delay_minutes: null を minutes モード扱いしてしまう

- 何を言っている？: delay_minutes !== undefined 判定のため、null でも minutes モードと判定され、保存時に delay_minutes: 0 が入って即時送信扱いになる可
  能性がある。
- この問題は実際に起こる？: 起こり得る。既存データの delay_minutes が null の場合に編集すると発生。
- 起こった場合の影響は？: 1通目が意図せず即時送信になるリスク。
- 現状のコードで本当に問題？: はい。判定ロジックが不適切。
- 修正する場合の工数は？: 低。delay_minutes != null（null/undefined を両方除外）にするだけで30分以内。

2. タイムラインプレビューが delay_minutes を無視

- 何を言っている？: 分指定のステップでもプレビューは日数＋時刻扱い（あるいは「即時」）になってしまう。
- この問題は実際に起こる？: 起こる。delay_minutes を使うと必ず表示ズレ。
- 起こった場合の影響は？: 運用者の認知ズレ（配信タイミングの誤解）。
- 現状のコードで本当に問題？: UX上の問題。機能バグではないが誤解を招く。
- 修正する場合の工数は？: 低〜中。プレビューの表示ロジックを minutes 対応にするだけで1〜2時間。
